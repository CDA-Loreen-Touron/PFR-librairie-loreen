(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1020:function(t,e,r){"use strict";var n=r(902);r.n(n).a},1021:function(t,e,r){(e=r(6)(!1)).push([t.i,'@-webkit-keyframes spin-data-v-6b81fe83{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin-data-v-6b81fe83{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.request-page[data-v-6b81fe83]{padding:32px 24px}h1[data-v-6b81fe83]{margin-bottom:16px}.request-placeholders[data-v-6b81fe83]{position:relative;overflow:hidden}.request-placeholders[data-v-6b81fe83]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:70%;background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0))}.request-list[data-v-6b81fe83]{min-height:300px}.request-list[data-v-6b81fe83] .infinite-scroller .preloader{height:120px}.request-list[data-v-6b81fe83] .post+.post{margin-top:40px}.empty[data-v-6b81fe83]{height:500px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.empty .empty-icon[data-v-6b81fe83]{width:58px;height:58px;margin:0 auto 16px}.empty .empty-icon[data-v-6b81fe83] svg{display:block}.empty .empty-title[data-v-6b81fe83]{margin-bottom:8px;font-weight:600}.empty .empty-detail[data-v-6b81fe83]{max-width:360px}',""]),t.exports=e},3442:function(t,e,r){"use strict";r.r(e);r(14),r(13);var n=r(53),o=r(48),c=(r(360),r(17),r(25),r(16)),h=(r(34),r(10),r(8),r(12),r(0)),d=r(4),l=r(885);r(24);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"request-icon",components:{requestSearch:function(){return r.e(85).then(r.bind(null,3464))},requestForm:function(){return r.e(78).then(r.bind(null,3463))},requestPost:function(){return r.e(82).then(r.bind(null,3462))},requestPlaceholder:function(){return r.e(81).then(r.bind(null,3467))}},data:function(){return{initialUser:!1,page:1,makers:null,pages:1,limit:15,query:"",sortBy:"-createdAt",filterBy:"all",total:0,initialEmpty:!1,searchNotfound:!1,loading:!1,loadingMore:!1,posts:[]}},computed:m(m(m({},Object(d.c)("request-icons",["getDesigners"])),Object(d.e)({user:function(t){return t.auth.user},platforms:function(t){return t.appInfo.platforms}})),{},{requestedPlatforms:function(){var t=this,e=["ultraviolet","dusk","Dusk_Wired","cotton","pastel_glyph","win10","win8","android"],r={};return Object.keys(this.platforms).map((function(n){e.includes(n)||(r[n]=t.platforms[n])})),r}}),watch:{user:function(t){!this.posts.length||t.isGuest||this.initialUser&&t.loaded||(this.page=1,this.posts=[],this.makers=[],this.fetchRequests(),this.fetchMakers())},query:function(t){if(0===t.length)return this.page=1,this.posts=[],void this.fetchRequests();this.searchHandler()}},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,h,d,f,m,v,y,k,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.route,r=t.store,t.env,t.query,t.req,t.redirect,t.error,n=0,o=[],c=1,h=15,d=null,f=!1,m=!1,v=r.state.auth.user.authToken,e.prev=10,e.next=13,l.a.fetchRequests({sort:"-createdAt",authToken:v,limit:h});case 13:if(y=e.sent,o=y.docs,n=y.total,c=y.pages,o.length||(m=!0),k=r.state["request-icons"]&&r.state["request-icons"].designers,!v||k){e.next=25;break}return e.next=22,l.a.fetchMakers({authToken:v});case 22:(w=e.sent).docs&&w.docs.length&&w.docs.map((function(t){t.name||(t.name=t.email)})),d=w.docs;case 25:e.next=29;break;case 27:e.prev=27,e.t0=e.catch(10);case 29:return r.dispatch("updateSEO",{title:"Request an icon | Icons8",description:"Request icons in your favourite style. Help us make our iconic world a better place."}),e.abrupt("return",{total:n,pages:c,limit:h,posts:o,makers:d,initialEmpty:m,initialUser:f});case 31:case"end":return e.stop()}}),e,null,[[10,27]])})))()},mounted:function(){var t=this;window.addEventListener("load",this.notify),this.searchHandler=this.$utils.debounce((function(){t.search()}),500),this.makers?this.setDesigners(this.makers):this.makers=this.getDesigners()},beforeDestroy:function(){window.removeEventListener("load",this.notify)},methods:m(m({},Object(d.d)("request-icons",{setDesigners:"SET_DESIGNERS"})),{},{notify:function(){void 0===localStorage.requestFirstVisit&&this.$notify({icon:this.$icons["request/thumbsUp"],title:"You can vote for the icons",text:"The requested icons with the most votes we draw first",delay:0,onCloseHandler:function(){localStorage.requestFirstVisit=Date.now()}})},loadMore:function(){!this.loadingMore&&this.page<this.pages&&(this.page+=1,this.fetchRequests())},fetchRequests:function(){var t=this;if(!this.loading&&!this.loadingMore){this.searchNotfound=!1;var e={sort:this.sortBy,page:this.page,limit:this.limit,term:this.query,authToken:this.user.authToken};"object"===Object(o.a)(this.filterBy)&&Object.assign(e,this.filterBy),1===this.page&&(this.loading=!0),this.page>1&&(this.loadingMore=!0),l.a.fetchRequests(e).then((function(e){t.total=e.total,t.pages=e.pages,t.$nextTick((function(){t.posts=[].concat(Object(n.a)(t.posts),Object(n.a)(e.docs))})),t.posts.length||(t.searchNotfound=!0)})).catch((function(t){return console.warn(t)})).finally((function(){t.loading=!1,t.loadingMore=!1}))}},fetchMakers:function(){var t=this;l.a.fetchMakers({authToken:this.user.authToken}).then((function(e){t.makers=e.docs})).catch((function(t){return console.warn(t)}))},updateVotes:function(t,e){e.votesCount=t},requestAdd:function(data){this.pages>1&&this.pages>this.page&&this.posts.pop(),this.posts.unshift(data)},search:function(){this.page=1,this.posts=[],this.sortBy="-createdAt",this.filterBy="all",this.fetchRequests()},sort:function(param){this.sortBy=param,this.page=1,this.posts=[],this.fetchRequests()},filter:function(param){this.page=1,this.posts=[],this.filterBy=param,this.fetchRequests()}})},y=(r(1020),r(1)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"request-page"},[r("div",{staticClass:"container"},[r("h1",[t._v("Icon Request")]),r("request-form",{attrs:{styles:t.requestedPlatforms,user:t.user},on:{"request:create":t.requestAdd}}),t.initialEmpty?t._e():r("request-search",{attrs:{user:t.user,makers:t.makers},on:{"request:sort":t.sort,"request:filter":t.filter},model:{value:t.query,callback:function(e){t.query="string"==typeof e?e.trim():e},expression:"query"}}),r("div",{staticClass:"request-list"},[t.loading?[r("div",{staticClass:"request-placeholders"},t._l(5,(function(i){return r("request-placeholder",{key:i,attrs:{width:400,height:80}},[r("rect",{attrs:{x:"75",y:"20",rx:"4",ry:"4",width:"250",height:"8"}}),r("rect",{attrs:{x:"75",y:"35",rx:"4",ry:"4",width:"220",height:"8"}}),r("rect",{attrs:{x:"75",y:"50",rx:"4",ry:"4",width:"280",height:"8"}}),r("rect",{attrs:{x:"75",y:"0",rx:"6",ry:"6",width:"320",height:"12"}}),r("rect",{attrs:{x:"0",y:"0",rx:"6",ry:"6",width:"60",height:"65"}})])})),1)]:t.posts.length?[r("app-infinite-scroll",{attrs:{throttle:50,preloader:t.loadingMore},on:{infinite:t.loadMore}},t._l(t.posts,(function(e,n){return r("request-post",{key:n,attrs:{post:e,user:t.user,makers:t.makers,platforms:t.platforms},on:{"update:votes":function(r){return t.updateVotes(r,e)}}})})),1)]:t.searchNotfound?[r("div",{staticClass:"empty"},[r("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestSad"])}}),r("div",{staticClass:"empty-title"},[t._v("No requests found")])])]:t.initialEmpty?[r("div",{staticClass:"empty"},[r("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestEmpty"])}}),r("div",{staticClass:"empty-title"},[t._v("There are no requests")]),r("div",{staticClass:"empty-detail"},[t._v("Here you can request icons that you haven't found. By the way, your request will be the first.")])])]:t._e()],2)],1)])}),[],!1,null,"6b81fe83",null);e.default=component.exports},885:function(t,e,r){"use strict";r(17),r(8);var n=r(22),o=r.n(n).a.create({baseURL:"https://inceptum.icons8.com"});e.a={createRequest:function(t){var e,title=t.title,r=t.description,n=t.attachments,c=void 0===n?[]:n,h=t.platforms,d=void 0===h?[]:h,l=t.authToken,data={title:title,description:r,attachments:c,platforms:d};return l&&(e={Authorization:"Bearer ".concat(l)}),new Promise((function(t,r){o.request({url:"/api/requests",method:"put",data:data,headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(r)}))},fetchRequests:function(t){var e,r=t.sort,n=t.page,c=void 0===n?1:n,h=t.limit,d=void 0===h?15:h,l=t.isMine,f=void 0!==l&&l,m=t.isAssignedToMe,v=void 0!==m&&m,y=t.isUnassigned,k=void 0===y?null:y,w=t.isAssignedTo,x=void 0===w?null:w,T=t.status,O=void 0===T?null:T,j=t.term,P=void 0===j?null:j,M=t.authToken,B={sort:r,page:c,limit:d,type:"icon"};return f&&(B.isMine=f),v&&(B.isAssignedToMe=v),k&&(B.isUnassigned=k),x&&(B.isAssignedTo=x),O&&(B.status=O),P&&(B.term=P),M&&(e={Authorization:"Bearer ".concat(M)}),new Promise((function(t,r){o.request({url:"/api/requests",method:"get",params:B,headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(r)}))},fetchMakers:function(t){var e,r=t.authToken;return r&&(e={Authorization:"Bearer ".concat(r)}),new Promise((function(t,r){o.request({url:"/api/makers",method:"get",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(r)}))},fetchDetail:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r),method:"get",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},togglevote:function(t){var e,r=t.action,n=t.id,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(n,"/").concat(r),method:"post",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},assignMaker:function(t){var e,r=t.id,n=t.makerId,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(r,"/assignMaker"),method:"post",headers:e,data:{makerId:n}}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},takeToWork:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r,"/takeToWork"),method:"post",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},deleteRequest:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r),method:"delete",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},resolveRequest:function(t){var e,r=t.resolvedItems,n=t.id,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(n,"/resolve"),method:"post",headers:e,data:{resolvedItems:r}}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},uploadFiles:function(t){var e=t.file,r=t.authToken,n={"Content-Type":"multipart/form-data"};r&&(n.Authorization="Bearer ".concat(r));var c=new FormData;return c.append("file",e,e.name),new Promise((function(t,e){o.request({url:"/api/uploadFiles",method:"post",headers:n,data:c}).then((function(e){e.data.success&&t(e.data)})).catch(e)}))}}},902:function(t,e,r){var content=r(1021);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("094ad173",content,!0,{sourceMap:!1})}}]);